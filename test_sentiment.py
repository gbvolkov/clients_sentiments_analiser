# 1. Activate your virtual environment (if not already):
#    On Windows CMD:
#      venv\Scripts\activate.bat
#    On PowerShell:
#      .\venv\Scripts\Activate.ps1

from deeppavlov import build_model
import json

# 2. Point to your JSON config for the sentiment pipeline.
#    This should be the same config you used for training:
CONFIG_PATH = "./sentiment/sentiments_model_inject.json"

# 3. Load the trained pipeline. 
#    Setting `download=False` skips re-downloading embeddings/etc.
sentiment_model = build_model(CONFIG_PATH, download=False)

# 4. Prepare your own data. For example, a Python list of raw strings:
texts = [
    "Q: Какова вероятность того, что Вы порекомендуете нас своим партнёрам по шкале от 0 до 10, где 0 — «Ни в коем случае…», а 10 — «Обязательно порекомендую»? A: Ответ на 1 вопрос - 10, уже рекомендую, плюс мы у вас уже опять товар берём, ответ на 2 вопрос - да всё хорошо, всё устраивает",
    "Q: Расскажите, пожалуйста, что вам понравилось в работе с нами, а что необходимо улучшить? A: Ответ на 1 вопрос - Ну порекомендую 10; Ответ на 2 вопрос - Улучшить процентую ставку, а так все хорошо.",
    "Q: Расскажите, пожалуйста, что вам понравилось в работе с нами, а что необходимо улучшить? A: Ответ на 1 вопрос - 10; Ответ на 2 вопрос - Необходимо улучшить оперативность, понравился человечный подход к работе, ну грамотность, оперативность в части как проходит сделка по всем этапам, руководителя и менеджера.",
    "Q: Расскажите, пожалуйста, что вам понравилось в работе с нами, а что необходимо улучшить? A: Ответ на 1 вопрос - 10; Ответ на 2 вопрос - да, в принципе нормально. Единственное, когда мы приехали, ну там, та, че-то не стыковка была, но это же не ваша вина, кого-то взяли, кто-то не доехал. Да, че-то там было с поставщиком, а так ровно все.",
    "Q: Расскажите, пожалуйста, что вам понравилось в работе с нами, а что необходимо улучшить? A: Ответ на 1 вопрос - 5; Ответ на 2 вопрос - Были какие то проблемы, они не были решины, какие то вопросы, долго решаются вопросы, какие то а как то больше никаких с вами дел нету вот даже и не хочется пока что, нет никаких проблем все нормально, все девушка до свидания, больше времени нет, вот честно раньше было хорошо работали изначально, Екатерина Акулова у вас работала, если вы хоть немножко разбирайтесь да в компании, если вы сторойний человек и не понимаете ничего, а сейчас соответственно стало совсем все плохо, вот и все, я черт его знает, вы звоните директору компании мне пофиг вообще честно говоря вот так то, я услышал что были какие то вопросы не решены ну вот и соответственно раньше такого не было, сейчас соответственно взаимодействие очень плохое.",
    "Всё ужасно!",
]

labels, probs = sentiment_model(texts)

for txt, lbl, score_vec in zip(texts, labels, probs):
    print("Text:   ", txt)
    print("Label:  ", lbl)          # e.g. "POS"
    print("Scores:", score_vec)     # e.g. [0.80, 0.15, 0.05]
    print("-" * 40)
